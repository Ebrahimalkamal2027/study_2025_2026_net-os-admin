---
## Author
author:
  name: Ибрахим Мохсейн Алькамаль
  degrees: Student (3 курс)
  orcid: ""
  email: 1032225432@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6
## Title
title: Лабораторная работа №4
subtitle: "Дисциплина: Администрирование сетевых подсистем "
license: CC BY
date: today
date-format: "YYYY-MM-DD" # Example: 2025-09-06
---

# Цель работы
## Цель работы

- Приобретение практических навыков установки и базового конфигурирования HTTP-сервера Apache



# Выполнение лабораторной работы

### Установка HTTP-сервера

- Выполнен `yum grouplist`
- Обнаружена группа `Basic Web Server`
- Установлена среда `Server with GUI`

![Список групп пакетов yum (grouplist)](image/1.png){#fig-1 width=70%}

---

- Выполнена установка группы `Basic Web Server`
- Установлены пакеты `httpd`, `mod_ssl`, `mod_fcgid`
- Установлены зависимости `apr`, `apr-util`

![Установка группы пакетов Basic Web Server через dnf](image/2.png){#fig-2 width=70%}



## Базовое конфигурирование HTTP-сервера

- Просмотрен каталог `/etc/httpd/conf.d`
- Обнаружены `ssl.conf`, `welcome.conf`, `userdir.conf`
- Подтверждена стандартная конфигурация Apache

![Содержимое каталога /etc/httpd/conf.d](image/3.png){#fig-3 width=70%}

---

- В `firewalld` добавлена служба `http`
- Правило добавлено временно и постоянно

![Настройка firewalld для разрешения службы http](image/3-1.png){#fig-3-1 width=70%}

---

- Запущен мониторинг `journalctl -x -f`
- Контроль состояния службы в реальном времени

![Мониторинг системного журнала через journalctl -x -f](image/4.png){#fig-4 width=70%}

---

- Выполнены `systemctl enable httpd` и `start httpd`
- Статус — `active (running)`
- Прослушивание портов 80 и 443

![Состояние службы httpd после запуска](image/5.png){#fig-5 width=70%}



## Анализ работы HTTP-сервера

- На клиенте открыт `http://192.168.1.1`
- Отображена страница `HTTP Server Test Page`
- Подтверждена работа Apache

![Тестовая страница HTTP Server Test Page в браузере](image/6.png){#fig-6 width=70%}

---

- Выполнен мониторинг `/var/log/httpd/access_log`
- Зафиксированы GET-запросы от `192.168.1.30`
- Коды ответа 200 и 404

![Мониторинг access\_log веб-сервера](image/7.png){#fig-7 width=70%}

---

- Выполнен мониторинг `/var/log/httpd/error_log`
- Сообщение об отсутствии `index.html`
- Код ответа 403

![Мониторинг Error\_log веб-сервера](image/8.png){#fig-8 width=70%}


## Настройка виртуального хостинга для HTTP-сервера

- В прямую зону добавлена запись `www A 192.168.1.1`
- Присутствует запись клиента с DHCID

![Файл прямой DNS-зоны alkаmal.net с записью www](image/9.png){#fig-9 width=70%}

---

- В обратную зону добавлена PTR-запись
- `192.168.1.1 → www.alkamal.net.`

![Файл обратной DNS-зоны 192.168.1 с PTR-записью](image/10.png){#fig-10 width=70%}

---

- Удалены файлы `.jnl` зон
- Обеспечено применение новых записей

![Удаление журналов DNS-зон (.jnl)](image/11.png){#fig-11 width=70%}

---

- Созданы файлы виртуальных хостов
- `server.alkamal.net.conf`
- `www.alkamal.net.conf`

![Создание конфигурационных файлов виртуальных хостов](image/12.png){#fig-12 width=70%}

---

- В `server.alkamal.net.conf` задан `<VirtualHost *:80>`
- Указаны `ServerName`, `DocumentRoot`
- Настроены отдельные лог-файлы

![Конфигурация виртуального хоста server.alkamal.net](image/13.png){#fig-13 width=70%}

---

- В `www.alkamal.net.conf` настроен второй виртуальный хост
- Отдельный `DocumentRoot`
- Индивидуальные журналы

![Конфигурация виртуального хоста www.alkamal.net](image/14.png){#fig-14 width=70%}



## Создание контента виртуальных хостов

- Создан каталог `/var/www/html/server.alkamal.net`
- Создан файл `index.html`

![Создание каталога server.alkamal.net и файла index.html](image/15.png){#fig-15 width=70%}

---

- В `index.html` добавлено тестовое содержимое

![Содержимое index.html для server.alkamal.net](image/16.png){#fig-16 width=70%}

---

- Создан каталог `/var/www/html/www.alkamal.net`
- Создан файл `index.html`

![Создание каталога www.alkamal.net и файла index.html](image/17.png){#fig-17 width=70%}

---

- В `index.html` добавлено тестовое содержимое

![Содержимое index.html для www.alkamal.net](image/18.png){#fig-18 width=70%}



## Настройка прав доступа и SELinux

- Выполнен `chown -R apache:apache /var/www`
- Восстановлены SELinux-контексты
- Перезапущен `httpd`

![Корректировка прав доступа, восстановление контекста SELinux и перезапуск httpd](image/19.png){#fig-19 width=70%}



## Проверка работы виртуальных хостов

- На клиенте открыт `http://server.alkamal.net`
- Отображена тестовая страница

![Доступ к виртуальному хосту server.alkamal.net](image/20.png){#fig-20 width=70%}

---

- Открыт `http://www.alkamal.net`
- Отображена вторая тестовая страница

![Доступ к виртуальному хосту www.alkamal.net](image/21.png){#fig-21 width=70%}



## Внесение изменений в настройки внутреннего окружения виртуальной машины

- Создана структура `http/etc/httpd/conf.d`
- Создана структура `http/var/www/html`
- Скопированы конфигурации и контент

![Создание структуры каталогов и копирование конфигурации HTTP](image/22.png){#fig-22 width=70%}

---

- Скопированы файлы DNS-зон в `provision`

![Копирование файлов DNS-зон в каталог provision](image/22.png){#fig-22 width=70%}

---

- Создан исполняемый файл `http.sh`

![Создание и подготовка файла http.sh](image/22.png){#fig-22 width=70%}

---

- В `http.sh` реализованы:
- установка `Basic Web Server`
- копирование конфигураций
- назначение владельца `apache`
- восстановление SELinux
- настройка firewalld
- запуск `httpd`

![Содержимое скрипта http.sh для автоматической настройки HTTP](image/23.png){#fig-23 width=70%}

---

- В `Vagrantfile` добавлен provisioner `shell`
- Указан путь `provision/server/http.sh`
- Установлен `preserve_order: true`

![Добавление provisioner в Vagrantfile](image/24.png){#fig-24 width=70%}



# Выводы
## Выводы

- Установлен и настроен HTTP-сервер Apache
- Открыта служба `http` в firewall
- Подтверждён запуск `httpd`
- Настроен виртуальный хостинг для двух доменов
- Созданы отдельные `DocumentRoot` и лог-файлы
- Обновлены DNS-записи (A и PTR)
- Проверена доступность сайтов с клиента
- Реализована автоматизация через `http.sh` и `Vagrantfile`
