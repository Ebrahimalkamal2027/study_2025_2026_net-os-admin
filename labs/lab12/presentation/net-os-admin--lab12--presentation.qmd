---
## Author
author:
  name: Ибрахим Мохсейн Алькамаль
  degrees: Student (3 курс)
  orcid: ""
  email: 1032225432@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6
## Title
title: Лабораторная работа №12
subtitle: "Дисциплина: Администрирование сетевых подсистем "
license: CC BY
date: today
date-format: "YYYY-MM-DD" # Example: 2025-09-06
---

# Цель работы
## Цель работы

- Приобретение практических навыков управления системным временем
- Настройка синхронизации времени в сети

# Выполнение лабораторной работы

## Настройка параметров времени

- Выполнена команда `timedatectl`
- Установлена временная зона UTC (+0000)
- Локальное и универсальное время совпадают
- Системные часы синхронизированы
- Служба NTP активна
- RTC работает в UTC

![Параметры времени системы по выводу timedatectl](image/1.png){#fig-1 width=70%}

---

- Выполнена команда `date`
- Отображено текущее время в формате UTC

- Проверено аппаратное время командой `hwclock`
- RTC соответствует системному времени
- Используется формат UTC (+00:00)

## Управление синхронизацией времени

- Выполнена установка пакета `chrony`
- Пакет уже установлен
- Дополнительные действия не требуются

![Установка пакета chrony через dnf](image/2.png){#fig-2 width=70%}

---

- Выполнена команда `chronyc sources`
- Отображены источники синхронизации
- Символ `^*` — текущий источник
- Символ `^+` — альтернативные
- Символ `^?` — недоступные

![Источники времени на сервере (chronyc sources)](image/3.png){#fig-3 width=70%}

---

- В `chrony.conf` добавлена строка `allow 192.168.0.0/16`
- Разрешён доступ клиентам локальной сети

![Добавление директивы allow в chrony.conf](image/4.png){#fig-4 width=70%}

---

- Выполнен `systemctl restart chronyd`
- В firewall открыт сервис `ntp`
- Применены изменения конфигурации

![Перезапуск chronyd и настройка firewall для NTP](image/5.png){#fig-5 width=70%}

---

- На клиенте выполнена команда `chronyc sources`
- Отображены внешние NTP-серверы
- Определён текущий источник времени

![Источники времени на клиенте до изменения конфигурации](image/6.png){#fig-6 width=70%}

---

- В `chrony.conf` клиента добавлена строка `server server.alkamal.net iburst`
- Удалены остальные строки `server`
- Параметр `iburst` ускоряет синхронизацию

![Настройка источника времени на клиенте](image/7.png){#fig-7 width=70%}

---

- После перезапуска `chronyd` выполнена повторная проверка
- Основным источником стал локальный сервер (Stratum 4)
- Символ `^*` подтверждает выбор источника

![на клиенте выполнена команда](image/8.png){#fig-8 width=70%}


## Внесение изменений в настройки внутреннего

- В `/vagrant/provision/server` создан каталог `ntp/etc`
- Скопирован файл `chrony.conf`

![Создание каталога ntp и копирование chrony.conf на сервере](image/9.png){#fig-9 width=70%}

---

- Создан исполняемый файл `ntp.sh`
- Назначены права на выполнение

![Создание и назначение прав файлу ntp.sh на сервере](image/10.png){#fig-10 width=70%}

---

- В `ntp.sh` добавлена установка `chrony`
- Реализовано копирование конфигурации в `/etc`
- Выполнен `restorecon -vR /etc`
- Открыт сервис `ntp` в firewall
- Перезапущен `chronyd`

![Содержимое скрипта ntp.sh для сервера](image/11.png){#fig-11 width=70%}

---

- На клиенте создан каталог `ntp/etc`
- Скопирован файл `chrony.conf`

![Создание каталога ntp и копирование chrony.conf на клиенте](image/12.png){#fig-12 width=70%}

---

- Создан исполняемый файл `ntp.sh`
- Назначены права на выполнение

![Создание и назначение прав файлу ntp.sh на клиенте](image/13.png){#fig-13 width=70%}

---

- В `ntp.sh` клиента добавлено копирование конфигурации
- Выполнен `restorecon`
- Перезапущен `chronyd`

![В конфигурационный файл Vagrantfile](image/14.png){#fig-14 width=70%}

---

- В `Vagrantfile` добавлены provisioning-блоки
- Указаны пути к `provision/server/ntp.sh` и `provision/client/ntp.sh`
- Параметр `preserve_order: true`
- Обеспечена автоматическая настройка при запуске VM

# Выводы

## Выводы

- Проверены параметры системного и аппаратного времени
- Настроена синхронизация через `chronyd`
- Сервер настроен как источник времени для локальной сети
- Клиент синхронизируется с локальным сервером
- Открыт сервис `ntp` в firewall
- Конфигурация интегрирована в provisioning Vagrant
- Обеспечена централизованная и воспроизводимая настройка времени
