---
## Author
author:
  name: Ибрахим Мохсейн Алькамаль
  degrees: Student (3 курс)
  orcid: ""
  email: 1032225432@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6
## Title
title: Лабораторная работа №6
subtitle: "Дисциплина: Администрирование сетевых подсистем "
license: CC BY
date: today
date-format: "YYYY-MM-DD" # Example: 2025-09-06
---

# Цель работы
## Цель работы

- Приобретение практических навыков установки и конфигурирования СУБД MariaDB



# Выполнение лабораторной работы

## Установка MariaDB

- Выполнен переход в режим суперпользователя
- Установлены пакеты `mariadb` и `mariadb-server` через `dnf`
- Подключены зависимости и компоненты сервера

![Установка пакетов mariadb и mariadb-server с помощью dnf](image/1.png){#fig-1 width=70%}

---

- Запущена служба `mariadb`
- Добавлена в автозагрузку (`enable`)
- Созданы символические ссылки systemd

![Запуск и включение службы mariadb через systemctl](image/2.png){#fig-2 width=70%}

---

- Проверено прослушивание порта 3306
- Процесс `mariadb` находится в состоянии LISTEN

![Проверка прослушивания порта 3306 процессом mariadb](image/2.png){#fig-2 width=70%}

---

- Выполнен `mysql_secure_installation`
- Включена аутентификация `unix_socket`
- Установлен пароль `root`
- Удалены анонимные пользователи
- Запрещён удалённый доступ root
- Удалена тестовая БД

![Выполнение mysql\_secure\_installation и настройка параметров безопасности](image/3.png){#fig-3 width=70%}

---

![Выполнение mysql\_secure\_installation и настройка параметров безопасности](image/3-1.png){#fig-3-1 width=70%}

---

- Выполнен вход `mysql -u root -p`
- Отображена версия сервера

![Вход в MariaDB под пользователем root](image/4.png){#fig-4 width=70%}

---

- Просмотр списка клиентских команд

![Список клиентских команд MariaDB](image/5.png){#fig-5 width=70%}

---

- Выполнен `SHOW DATABASES;`
- Отображены системные БД

![Отображение списка системных баз данных (SHOW DATABASES)](image/6.png){#fig-6 width=70%}



## Конфигурация кодировки символов

- Выполнен вход в MariaDB
- Команда `status` показала:
- Server characterset — `latin1`
- Db characterset — `latin1`
- Client — `utf8`

![Вход в MariaDB и выполнение команды status (до изменения кодировки)](image/7.png){#fig-7 width=70%}

---

- Создан файл `/etc/my.cnf.d/utf8.cnf`

![Создание файла utf8.cnf в каталоге /etc/my.cnf.d](image/8.png){#fig-8 width=70%}

---

- Добавлены параметры:
- `default-character-set = utf8`
- `character-set-server = utf8`

![Содержимое файла utf8.cnf с параметрами кодировки UTF-8](image/9.png){#fig-9 width=70%}

---

- Перезапущена служба `mariadb`
- Повторно выполнен `status`
- Все параметры кодировки — `utf8`

![Проверка статуса MariaDB после изменения кодировки](image/10.png){#fig-10 width=70%}



## Создание базы данных

- Выполнен вход под `root`

![Вход в MariaDB под пользователем root](image/11.png){#fig-11 width=70%}

---

- Создана БД `addressbook` (`utf8`, `utf8_general_ci`)
- Выполнен `SHOW TABLES;` — таблицы отсутствуют

![Создание базы данных addressbook и проверка списка таблиц](image/12.png){#fig-12 width=70%}

---

- Создана таблица `city` (`VARCHAR(40)`)
- Добавлены записи: Иванов, Петров, Сидоров
- Выполнен `SELECT * FROM city;`

![Создание таблицы city, вставка данных и результат SELECT \* FROM city](image/13.png){#fig-13 width=70%}

---

- Создан пользователь `alkamal@'%'`
- Назначены права `SELECT, INSERT, UPDATE, DELETE`
- Выполнен `FLUSH PRIVILEGES;`
- Проверена структура таблицы (`DESCRIBE city;`)

![Создание пользователя, назначение прав и описание структуры таблицы city](image/14.png){#fig-14 width=70%}

---

- Проверка через `mysqlshow`
- База `addressbook` и таблица `city` доступны

![Просмотр баз данных и таблиц addressbook с помощью mysqlshow](image/15.png){#fig-15 width=70%}



## Резервные копии

- Создан каталог `/var/backup`
- Выполнен дамп:
- `mysqldump > addressbook.sql`
- Создан сжатый дамп:
- `mysqldump | gzip`
- Создан дамп с временной меткой
- Выполнено восстановление из `.sql`
- Выполнено восстановление из `.sql.gz`

![резервного копирования](image/16.png){#fig-16 width=70%}


## Внесение изменений в настройки внутреннего окружения виртуальной машины

- Создан каталог `mysql/etc/my.cnf.d`
- Создан каталог `mysql/var/backup`
- Скопирован `utf8.cnf`
- Скопированы резервные копии

![Создание каталогов mysql и копирование конфигурации и резервных копий](image/17.png){#fig-17 width=70%}

---

- Создан скрипт `mysql.sh`
- Установка `mariadb` и `mariadb-server`
- Копирование конфигурации
- Создание `/var/backup`
- Запуск и включение `mariadb`
- Неинтерактивный `mysql_secure_installation`
- Создание БД `addressbook`
- Восстановление из резервной копии

![Содержимое скрипта mysql.sh для автоматической настройки MariaDB](image/18.png){#fig-18 width=70%}

---

- В `Vagrantfile` добавлен provision-блок
- Тип `shell`
- Путь `provision/server/mysql.sh`
- `preserve_order: true`

![Добавление конфигурации server mysql в Vagrantfile](image/19.png){#fig-19 width=70%}



# Выводы
## Выводы

- Установлен и настроен сервер MariaDB
- Подтверждено прослушивание порта 3306
- Выполнена базовая настройка безопасности
- Настроена кодировка `utf8`
- Создана БД `addressbook` и таблица `city`
- Настроены права пользователя
- Освоены процедуры резервного копирования и восстановления
- Реализована автоматизация через `mysql.sh` и `Vagrantfile`
